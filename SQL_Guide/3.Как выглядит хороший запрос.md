# Как выглядит хороший запрос

Во многих языках программирования есть правила хорошего стиля: использовать нижний регистр, разделять слова подчёркиванием, оставлять комментарии. Эти правила упрощают работу с чужим кодом и помогают разобраться в собственном через пару недель.

SQL — язык, не чувствительный к регистру: между операторами `SELECT` и `select` нет разницы. Но в SQL тоже есть правила стиля. Когда вы только начинаете работать с базами данных, эти правила кажутся неважными. Но постепенно вы начнёте писать более сложные запросы, и без соблюдения правил в них будет тяжело разобраться.

Запрос к базе данных может выглядеть так:

Скопировать кодSQL

```
select sp.advertising_id,sp.install_date,sp.session_num,sp.payer,sp.last_active as last_date, DATE_DIFF(sp.last_active, install_date, day) as max_play from players as sp where sp.date = '2021-02-28' and sp.install_date between '2021-02-01' and '2021-02-26'; 
```

Этот запрос выдаст то, что нужно, но даже квалифицированный специалист с трудом прочитает такой код.

А так выглядит тот же запрос, написанный по правилам:

Скопировать кодSQL

```
SELECT sp.advertising_id,
       sp.install_date,
       sp.session_num,
       sp.payer,
       sp.last_active AS last_date,
       DATE_DIFF(sp.last_active, install_date, DAY) AS max_play
FROM players AS sp
WHERE sp.date = '2021-02-28'
  AND sp.install_date BETWEEN '2021-02-01' AND '2021-02-26'; 
```

Стало лучше. Разберём, что изменилось.

## Правило № 1. Выделение ключевых слов

**Первое правило хорошего стиля** — отделять ключевые слова от названий столбцов и таблиц. Ключевые слова пишут в верхнем регистре, а названия — в нижнем.

В прошлом уроке данные из таблицы `pizza` выгружали так:

Скопировать кодSQL

```
SELECT *
FROM pizza; 
```

А так писать запросы не стоит: операторы выделены недостаточно.

Скопировать кодSQL

```
Select *
From pizza; 
```

Когда столбцов и таблиц будет много, написать правильный запрос будет сложнее.

## Правило № 2. Перенос строк

**Второе правило хорошего стиля** — перечислять поля и функции, перенося их на новую строку и выстраивая в один столбик. Так проще понять, какие поля или значения будут выгружены.

```
SELECT last_name,
       first_name,
       title
FROM staff; 
```

Так выглядят основные правила для запросов. При этом в разных компаниях и организациях бывают свои рекомендации. Их лучше соблюдать, чтобы не вносить хаос в общую работу.

Оформить запрос по всем правилам можно вручную или с помощью SQL-форматера, например [SQLFormat](https://sqlformat.org/). SQL-запрос вводят в специальное окно и на выходе получают его оформленную версию.