# Как устроен SQL-запрос

Реляционными базами данных управляют с помощью языка **SQL, или Structured Query Language** (англ. «язык структурированных запросов»).

SQL — декларативный язык. Это значит, что с его помощью описывают не алгоритм действий, а данные, которые хотят получить. Как выполнить такую команду, за вас решит СУБД.

Но у SQL, как и у большинства языков, много **диалектов**. Диалект — это набор дополнительных команд, расширяющих стандартные возможности языка.

У PostgreSQL тоже есть свои диалекты. Они немного отличаются от стандарта. Однако, разобравшись с PostgreSQL, вы сможете освоить любую другую реляционную СУБД — знаний синтаксиса вам для этого хватит.

## Структура запроса в SQL

SQL нужен для работы с базами данных, поэтому первым делом мы должны вывести данные на экран. Такую операцию называют **выгрузкой**. Специалист пишет специальный код на языке SQL — **запрос**. Исходя из запроса, программа выгружает из базы нужную информацию.

Запрос на выгрузку данных начинают со слова `SELECT` (англ. «выбрать»). Всё, что мы напишем после этого слова, отобразится в итоговом результате.

Например, мы хотим вывести на экран фразу «Здравствуйте, я ваш первый запрос!». Нет ничего проще: нужно написать в запросе `SELECT`, а затем — строку, которую необходимо отобразить.

Чтобы программа поняла, что относится к строке, фразу нужно взять в одинарные кавычки. Точка с запятой означает конец запроса.

Скопировать кодSQL

```
SELECT 'Здравствуйте, я ваш первый запрос!'; 
```

После запуска запроса отобразится следующий результат:

| **?column?**                       |
| ---------------------------------- |
| Здравствуйте, я ваш первый запрос! |
При помощи `SELECT` можно решать арифметические примеры: например, к восьми прибавить два и результат разделить на пять. При этом сохраняется приоритет арифметических операторов. Первыми выполняют умножение и деление, затем — сложение и вычитание. Скобки имеют наивысший приоритет.

Скопировать кодSQL

```
SELECT (8+2)/5; 
```

## Запрос для выгрузки данных

Чтобы выгрузить данные из таблицы, нужно указать, откуда именно их брать. Для этого дополним запрос словом `FROM` (англ. «из»).

Сначала сформулируем запрос на «человеческом» языке: «выбрать все данные из таблицы с клиентами».

На языке SQL запрос выглядит так:

Скопировать кодSQL

```
SELECT *
FROM buyer; 
```

Чтобы указать, какую информацию выгрузить из таблицы, добавляют инструкцию после `SELECT`. Символ `*` в SQL означает «всё». Получается команда «выбрать всё».

После слова `FROM` указывают таблицу, из которой нужно выгрузить данные. В нашем случае это будет таблица `buyer`. Получаем запрос «выбрать всё из таблицы `buyer`».

Теперь подсчитаем число записей в таблице. Так мы сможем выполнить наше первое аналитическое действие — оценить, насколько данных много. Сделаем это, поместив символ `*` в оператор `COUNT` (англ. «посчитать»):

Скопировать кодSQL

```
SELECT COUNT(*)
FROM buyer; 
```

Оператор `COUNT()` подсчитывает число записей. А поскольку в операторе мы указали `*`, запрос можно перевести как «подсчитать всё».

## Пишем первый запрос

Сейчас вы находитесь в тренажёре. Это основной инструмент для обучения — здесь студенты пишут и проверяют SQL-запросы, чтобы закрепить знания.

Размер полей в тренажёре можно настраивать. Для этого потяните за границы блоков. Когда настроите поля как надо, выполните своё первое задание.

Вспомним, как выглядит запрос на выгрузку математического действия или на вывод строки:

Скопировать кодSQL

```
SELECT (35-1)*4; -- математическая операция 
```

Скопировать кодSQL

```
SELECT 'Добрый день!'; -- вывод строки 
```

А так мы выгружаем всю информацию из таблицы:

Скопировать кодSQL

```
SELECT *   -- вывести всё
FROM table -- из таблицы table 
```

Чтобы подсчитать записи во всей таблице, используем такой запрос:

Скопировать кодSQL

```
SELECT COUNT(*)   -- подсчитать все записи
FROM table        -- из таблицы table 
```